<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSBT E-Sports - Registration</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="registration.css">
    <style>
        .required::after {
            content: " *";
            color: #ff4444;
        }
    </style>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <span class="lightning">âš¡</span>
            <span class="brand-name">CSBT E-Sports</span>
        </div>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="#leaderboard">Leaderboard</a>
            <a href="#about">About</a>
            <a href="#blog">Blog</a>
            <a href="#contact">Contact Us</a>
        </div>
    </nav>

    <div class="registration-container">
        <div class="registration-form">
            <h2>CSBT Esports Squad Registration</h2>
            
            <form id="registrationForm" onsubmit="return submitForm()">
                <div class="form-section">
                    <h3>Squad Details</h3>
                    <div class="form-group">
                        <label for="squadName">1. Squad Name</label>
                        <input type="text" id="squadName" name="squadName" required>
                    </div>
                    <div class="form-group">
                        <label for="leaderName">2. Team Leader Name</label>
                        <input type="text" id="leaderName" name="leaderName" required>
                    </div>
                    <div class="form-group">
                        <label for="leaderBGMI">3. Team Leader BGMI ID</label>
                        <input type="text" id="leaderBGMI" name="leaderBGMI" required>
                    </div>
                    <div class="form-group">
                        <label for="leaderIGN">4. Team Leader BGMI In-Game Name (IGN)</label>
                        <input type="text" id="leaderIGN" name="leaderIGN" required>
                    </div>
                    <div class="form-group">
                        <label for="email">5. Email Address</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">6. Phone Number</label>
                        <div class="phone-input">
                            <span class="country-code">+91</span>
                            <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" maxlength="10" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Team Players</h3>
                    
                    <div class="player-section">
                        <h4>ðŸ”¹ Player 2</h4>
                        <div class="form-group">
                            <label for="player2Name">Name</label>
                            <input type="text" id="player2Name" name="player2Name" required>
                        </div>
                        <div class="form-group">
                            <label for="player2BGMI">BGMI ID</label>
                            <input type="text" id="player2BGMI" name="player2BGMI" required>
                        </div>
                        <div class="form-group">
                            <label for="player2IGN">BGMI IGN</label>
                            <input type="text" id="player2IGN" name="player2IGN" required>
                        </div>
                    </div>

                    <div class="player-section">
                        <h4>ðŸ”¹ Player 3</h4>
                        <div class="form-group">
                            <label for="player3Name">Name</label>
                            <input type="text" id="player3Name" name="player3Name" required>
                        </div>
                        <div class="form-group">
                            <label for="player3BGMI">BGMI ID</label>
                            <input type="text" id="player3BGMI" name="player3BGMI" required>
                        </div>
                        <div class="form-group">
                            <label for="player3IGN">BGMI IGN</label>
                            <input type="text" id="player3IGN" name="player3IGN" required>
                        </div>
                    </div>

                    <div class="player-section">
                        <h4>ðŸ”¹ Player 4</h4>
                        <div class="form-group">
                            <label for="player4Name">Name</label>
                            <input type="text" id="player4Name" name="player4Name" required>
                        </div>
                        <div class="form-group">
                            <label for="player4BGMI">BGMI ID</label>
                            <input type="text" id="player4BGMI" name="player4BGMI" required>
                        </div>
                        <div class="form-group">
                            <label for="player4IGN">BGMI IGN</label>
                            <input type="text" id="player4IGN" name="player4IGN" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Substitute Player (Optional)</h3>
                    <div class="player-section">
                        <div class="form-group">
                            <label for="subName">Name</label>
                            <input type="text" id="subName" name="subName">
                        </div>
                        <div class="form-group">
                            <label for="subBGMI">BGMI ID</label>
                            <input type="text" id="subBGMI" name="subBGMI">
                        </div>
                        <div class="form-group">
                            <label for="subIGN">BGMI IGN</label>
                            <input type="text" id="subIGN" name="subIGN">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Must Read and Follow Agreements</h3>
                    <div class="agreement-box">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="terms" required>
                            <label for="terms" class="required">I agree to the <a href="#" id="termsLink">Terms & Conditions</a></label>
                        </div>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="rules" required>
                            <label for="rules" class="required">I agree to follow the <a href="#" id="rulesLink">Rules & Regulations</a></label>
                        </div>
                        <div id="error-message" class="error-message" style="display: none;">
                            Please agree to Terms & Conditions and Rules & Regulations
                        </div>
                    </div>
                </div>

                <div style="text-align: center;">
                    <button type="submit" class="submit-btn">Register Now</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Terms Modal -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Terms & Conditions for Payment</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <ol class="terms-list">
                    <li>
                        <strong>Non-Refundable Payment</strong>
                        The registration fee is non-refundable under any circumstances, including disqualification, absence, or withdrawal from the tournament.
                    </li>
                    <li>
                        <strong>Correct Payment Details</strong>
                        Players must ensure they enter the correct payment details and transaction ID while registering. Any incorrect details may result in disqualification.
                    </li>
                    <li>
                        <strong>Payment Confirmation</strong>
                        Once the payment is successfully made, players will receive a confirmation message or email. If not received within 24 hours, players must contact support with proof of payment.
                    </li>
                    <li>
                        <strong>No Transfers</strong>
                        Registration fees cannot be transferred to another tournament, player, or event.
                    </li>
                    <li>
                        <strong>Fraudulent Transactions</strong>
                        Any fraudulent or unauthorized transactions will lead to immediate disqualification and potential legal action.
                    </li>
                    <li>
                        <strong>Tournament Cancellation</strong>
                        In case of event cancellation by CSBT Esports, players will be eligible for a full refund, which will be processed within 7-10 working days.
                    </li>
                    <li>
                        <strong>Payment Deadline</strong>
                        Registration fees must be paid before the deadline. Late payments will not be accepted, and entry will be denied.
                    </li>
                    <li>
                        <strong>Receipt of Payment</strong>
                        Players must keep a screenshot or proof of payment until the tournament begins, as it may be required for verification.
                    </li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Rules & Regulations - CSBT Esports BGMI Tournament</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <p class="rules-intro">To ensure a fair and competitive environment, all players must follow these rules:</p>
                
                <div class="rules-section">
                    <h3>1. General Rules</h3>
                    <ul class="rules-list">
                        <li>Players must register with their correct in-game name and ID.</li>
                        <li>Only registered players are allowed to participate.</li>
                        <li>Players must join the lobby on time; late entries will not be entertained.</li>
                        <li>The use of emulators, hacks, scripts, or third-party software is strictly prohibited.</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>2. Match Rules</h3>
                    <ul class="rules-list">
                        <li>Players must play on the official BGMI app.</li>
                        <li>Teaming, hacking, or cheating will lead to immediate disqualification.</li>
                        <li>Intentional disconnections will not be considered for rematches.</li>
                        <li>If a match is interrupted due to server issues, it will be rescheduled.</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>3. Scoring & Ranking</h3>
                    <ul class="rules-list">
                        <li>The tournament will follow a points-based ranking system.</li>
                        <li>Kill points & placement points will determine the final ranking.</li>
                        <li>Position points: 1st = 15pts, 2nd = 12pts, 3rd = 10pts, 4th = 8pts, 5th = 6pts, 6th-7th = 4pts, 8th-9th = 2pts, 10th-12th = 1pt.</li>
                        <li>Each kill will award 1 point to the team.</li>
                        <li>The MVP Award goes to the player with the most kills in the final match.</li>
                        <li>The Kill Leader is the player with the highest kills throughout the tournament.</li>
                        <li>The Player of the Season is awarded based on overall performance.</li>
                        <li>In case of a tie, the team with more kill points will be ranked higher.</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>4. Conduct & Fair Play</h3>
                    <ul class="rules-list">
                        <li>Players must maintain sportsmanship and respect towards opponents and organizers.</li>
                        <li>Toxic behavior, abusive language, or harassment will result in a ban.</li>
                        <li>Any attempt to manipulate results (e.g., teaming) will lead to disqualification.</li>
                        <li>Players must follow the instructions of tournament administrators.</li>
                        <li>Disputes must be reported immediately to tournament officials with proper evidence.</li>
                        <li>Decisions made by tournament officials are final and binding.</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>5. Streaming & Content</h3>
                    <ul class="rules-list">
                        <li>Players must seek permission before streaming tournament matches.</li>
                        <li>Organizers hold the right to stream, record, and use gameplay content for promotional purposes.</li>
                        <li>Players streaming matches must have a minimum delay of 5 minutes.</li>
                        <li>Stream sniping is strictly prohibited and will result in immediate disqualification.</li>
                        <li>Players must maintain professional conduct during streams and interviews.</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>6. Technical Requirements</h3>
                    <ul class="rules-list">
                        <li>Players must have a stable internet connection.</li>
                        <li>All players must join the tournament Discord server for communication.</li>
                        <li>Players must record their gameplay for verification if required.</li>
                        <li>Device specifications must meet BGMI's minimum requirements.</li>
                        <li>Players are responsible for their own technical issues.</li>
                    </ul>
                </div>

                <p class="rules-footer">
                    Failure to follow these rules may result in warnings, disqualifications, or bans. Play fair and let the best player win!
                </p>
            </div>
        </div>
    </div>

    <script>
        const submitBtn = document.getElementById('submitBtn');
        const termsCheckbox = document.getElementById('terms');
        const rulesCheckbox = document.getElementById('rules');
        const errorMessage = document.getElementById('error-message');
        const modals = {
            terms: document.getElementById('termsModal'),
            rules: document.getElementById('rulesModal')
        };

        function submitForm() {
            if (!termsCheckbox.checked || !rulesCheckbox.checked) {
                errorMessage.style.display = 'block';
                return false;
            }

            const form = document.getElementById('registrationForm');
            const formData = {
                // Squad Details
                squadName: form.squadName.value,
                leaderName: form.leaderName.value,
                leaderBGMI: form.leaderBGMI.value,
                leaderIGN: form.leaderIGN.value,
                email: form.email.value,
                phone: form.phone.value,
                
                // Player 2
                player2Name: form.player2Name.value,
                player2BGMI: form.player2BGMI.value,
                player2IGN: form.player2IGN.value,
                
                // Player 3
                player3Name: form.player3Name.value,
                player3BGMI: form.player3BGMI.value,
                player3IGN: form.player3IGN.value,
                
                // Player 4
                player4Name: form.player4Name.value,
                player4BGMI: form.player4BGMI.value,
                player4IGN: form.player4IGN.value,
                
                // Substitute Player (Optional)
                subName: form.subName.value || '',
                subBGMI: form.subBGMI.value || '',
                subIGN: form.subIGN.value || ''
            };

            // First save form data
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxbQ3cynydvja4-rNGSeMehoIQpjdYDVfcuPpD-tHdBlBeSMxNWsDzC7vO-N77sveVO/exec';
            
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'text/plain',
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                console.log('Success:', response);
                // Show UPI payment details in a modal
                showPaymentModal(formData);
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error submitting form. Please try again.');
            });

            return false;
        }

        // Add this function for payment modal
        function showPaymentModal(formData) {
            const modalHTML = `
                <div id="paymentModal" class="modal" style="display: block;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Payment Details</h2>
                            <span class="close">&times;</span>
                        </div>
                        <div class="modal-body">
                            <div class="payment-info">
                                <h3>Please complete your payment</h3>
                                <p>Registration Fee: â‚¹199</p>
                                <div class="upi-details">
                                    <p><strong>UPI ID:</strong> your-upi-id@upi</p>
                                    <p><strong>Account Name:</strong> CSBT E-Sports</p>
                                </div>
                                <div class="payment-steps">
                                    <h4>Steps to pay:</h4>
                                    <ol>
                                        <li>Open your UPI app (Google Pay/PhonePe/Paytm)</li>
                                        <li>Send â‚¹199 to the UPI ID mentioned above</li>
                                        <li>Copy the UTR number from payment details</li>
                                        <li>Enter the UTR number below</li>
                                    </ol>
                                </div>
                                <div class="utr-input-section">
                                    <label for="utrNumber">Enter UTR Number:</label>
                                    <input type="text" id="utrNumber" placeholder="Enter 12-digit UTR number">
                                    <button onclick="verifyPayment('${formData.squadName}')" class="verify-btn">Verify Payment</button>
                                </div>
                                <div class="important-note">
                                    <p><strong>Important:</strong> Please mention your Squad Name "${formData.squadName}" in the payment note</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);

            // Handle close button
            const modal = document.getElementById('paymentModal');
            const closeBtn = modal.querySelector('.close');
            closeBtn.onclick = function() {
                modal.remove();
                form.reset();
            }
        }

        // Add this function to verify UTR
        function verifyPayment(squadName) {
            const utrNumber = document.getElementById('utrNumber').value;
            
            if (!utrNumber) {
                alert('Please enter UTR number');
                return;
            }

            // Update Google Sheet with UTR number
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxbQ3cynydvja4-rNGSeMehoIQpjdYDVfcuPpD-tHdBlBeSMxNWsDzC7vO-N77sveVO/exec';
            
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'text/plain',
                },
                body: JSON.stringify({
                    squadName: squadName,
                    utrNumber: utrNumber,
                    type: 'utr_update'
                })
            })
            .then(() => {
                alert('UTR number submitted successfully! We will verify your payment and confirm your registration.');
                document.getElementById('paymentModal').remove();
                form.reset();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error submitting UTR. Please try again or contact support.');
            });
        }

        // Modal functionality
        const termsLink = document.getElementById('termsLink');
        const rulesLink = document.getElementById('rulesLink');
        const closeBtns = document.querySelectorAll('.close');

        termsLink.addEventListener('click', (e) => {
            e.preventDefault();
            modals.terms.style.display = 'block';
        });

        rulesLink.addEventListener('click', (e) => {
            e.preventDefault();
            modals.rules.style.display = 'block';
        });

        closeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const modalId = this.closest('.modal').id.replace('Modal', '');
                modals[modalId].style.display = 'none';
            });
        });

        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });
    </script>
</body>
</html> 